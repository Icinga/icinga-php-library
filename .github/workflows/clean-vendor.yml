name: Clean Vendor Check

on:
  push:
    branches:
      - stable/*

jobs:
  check-vendor:
    name: Clean Vendor Check
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code base
        uses: actions/checkout@v3

      - name: Check If Vendor Is Clean
        run: |
          files=`find vendor -maxdepth 1 -type d -not -name "ipl" -not -name "fortawesome" -not -name "composer" -not -name "vendor"`
          if [ -z "$files" ]; then
            echo "No unknown vendor files found";
            exit 0;
          else
            echo "Found unknown vendor files: $files";
            exit 1;
          fi
